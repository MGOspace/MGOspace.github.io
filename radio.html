<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Radio — MGO_radio</title>
  <link rel="stylesheet" href="assets/site.css">
  <style>
    body {
      background: #000;
      margin: 0;
      min-height: 100vh;
      position: relative;
    }
  </style>

</head>

<body class="radio-page">

  <header class="radio-header">
    <a href="index.html" class="header-logo-link header-logo-link--nav" aria-label="Back to index">
      <img 
        src="assets/mgo-space_logonakedwhite.png" 
        alt="MGO Space"
        class="header-nav-logo"
      >
    </a>

    <div class="radio-header-inner">

      <!-- LOGO CENTRÉ -->
      <div class="header-logo">
        <img src="assets/MGO_radio_logo.svg" alt="MGO_radio Logo" class="header-logo-img">
      </div>

        <div class="header-player" id="header-player">

          <!-- Icône PLAY / PAUSE -->
          <span class="header-player-icon">▶</span>

          <!-- Titre et timer -->
          <span class="header-player-title">PLAYER</span>
          <span class="header-player-time"></span>

          <!-- Audio -->
          <audio id="radio-header-player">
            Votre navigateur ne supporte pas l’audio HTML5.
          </audio>

        </div>

    </div>
  </header>

  <main>
    <!-- SECTION MAIN CONTENT (Latest Mix) -->
    <section class="main-content">
      <div class="main-feature-box">
        <img src="assets/laradj.jpg" alt="Lara DJ" class="main-feature-img">

        <p class="main-feature-text">
          like in a web<br>
          catching rhythms
        </p>
      </div>
    </section>

    <!-- SECTION ARCHIVE -->
    <section class="archive-section">

      <div class="archive-header">
        <div class="archive-header-line"></div>

        <div class="archive-filters">
          <div class="filter-pill is-active" data-filter="all">All</div>
          <div class="filter-pill" data-filter="mix">Mix</div>
          <div class="filter-pill" data-filter="radio">Radio</div>
          <div class="filter-pill" data-filter="fragment">Fragments</div>
        </div>
      </div>

      <div class="archive-grid">
        <div class="audio-item"
             data-id="dakar_mix"
             data-type="mix"
             data-tags="dakar">

          <a href="https://www.mixcloud.com/M_GO/dakar_mix/"
             target="_blank"
             rel="noopener"
             class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/dakar_mix.jpg" alt="Dakar Mix cover">
            </div>
          </a>

          <div class="audio-title">
            <span class="audio-title-text">DAKAR_MIX</span>

            <div class="tags">
              <a href="tag-index.html?tag=dakar" class="tag-link">
                <div class="tag-wrapper">
                  <span class="tag-text">DAKAR</span>
                </div>
              </a>
            </div>

            <span class="audio-type">mix</span>
          </div>

        </div>

        <div class="audio-item"
             data-id="jammin_fragment"
             data-type="fragment"
             data-tags="dakar">

          <a href="#"
             class="audio-item-link audio-item-link--local"
             data-audio-src="assets/Fragment_jam-dakar.m4a">
            <div class="audio-thumb">
              <img src="" alt="">
            </div>
          </a>

          <div class="audio-title">
            <span class="audio-title-text">Jammin</span>
            <span class="audio-type">fragment</span>

            <div class="tags">
              <a href="tag-index.html?tag=dakar" class="tag-link">
                <div class="tag-wrapper">
                  <span class="tag-text">DAKAR</span>
                </div>
              </a>
            </div>
          </div>
        </div>

        <div class="audio-item" data-type="radio">
          <a href="https://www.mixcloud.com/M_GO/1110driving-in-berlin-20251011-151806/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/11.10_driving_in_berlin.jpg" alt="11.10 — Driving in Berlin">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">11.10_Driving in Berlin</span>
              <span class="audio-type">radio</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/4_mix/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/4_mix.jpg" alt="4 MIX">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">4_MIX</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="radio">
          <a href="https://www.mixcloud.com/M_GO/mgo_radio-20250424-181447/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/2_radio_25.4.25.jpg" alt="MGO Radio 25.04.25">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">MGO_radio_25.04.25</span>
              <span class="audio-type">radio</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/2703_00_bett/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/better.jpg" alt="27.03 Better!">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">27.03_Better!</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="radio">
          <a href="https://www.mixcloud.com/M_GO/mgo-radio-20250316-170655/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/1_radio.jpg" alt="MGO Radio 16.03.25">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">MGO_radio_16.03.25</span>
              <span class="audio-type">radio</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/2801_repeat/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/28.01_repeat.jpg" alt="">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">28.01_Repeat</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/in-response-to-rhythm-we-dance/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/3_mix.jpg" alt="">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">3_MIX</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/3_mix/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/the_sun_matched_with_the_sea.jpg" alt="The Sun Matched with the Sea">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">The Sun Matched with the Sea</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/fall-inc/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/fall_inc.jpg" alt="Fall Inc.">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">Fall Inc.</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/0809/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/08.09.jpg" alt="08.09">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">08.09</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/conversations-of-love/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/2_mix.jpg" alt="Conversations of Love">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">2_MIX</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="radio">
          <a href="https://www.mixcloud.com/M_GO/jm-la-cocina/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/jm_lacocina.jpg" alt="JM la cocina">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">JM la cocina</span>
              <span class="audio-type">radio</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/light/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/light.jpg" alt="Light">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">Light</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix">
          <a href="https://www.mixcloud.com/M_GO/simdiabolos/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/sim_diabolos.jpg" alt="SIM/DIA/BOLOS">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">SIM/DIA/BOLOS</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>

        <div class="audio-item" data-type="mix" data-id="1_mix">
          <a href="https://www.mixcloud.com/M_GO/1_mix/" target="_blank" class="audio-item-link">
            <div class="audio-thumb">
              <img src="assets/1_mix.png" alt="1 MIX">
            </div>
            <div class="audio-title">
              <span class="audio-title-text">1_MIX</span>
              <span class="audio-type">mix</span>
            </div>
          </a>
        </div>
      </div>

    </section>
  </main>


  <div class="radio-logo-container">
    <img src="assets/MGO_radio_logo.svg" alt="MGO_radio Logo" class="radio-logo">
  </div>

  <!-- MOBILE PLAYER BAR (hidden by default) -->
<div class="mobile-player" id="mobile-player" aria-hidden="true">
  <div class="mobile-player-inner" id="mobile-player-ui">
  </div>
</div>

<script>
(function () {
  /* =========================
     HELPERS
     ========================= */
  function isMobile() {
    return window.matchMedia && window.matchMedia('(max-width: 700px)').matches;
  }
  function clamp(n, min, max) {
    return Math.max(min, Math.min(max, n));
  }
  function formatTime(sec) {
    if (isNaN(sec)) return '00:00';
    var m = Math.floor(sec / 60);
    var s = Math.floor(sec % 60);
    return String(m).padStart(2, '0') + ':' + String(s).padStart(2, '0');
  }

  /* =========================
     ELEMENTS
     ========================= */
  var header          = document.querySelector('.radio-header');
  var headerInner     = document.querySelector('.radio-header-inner');

  var headerPlayerBox = document.getElementById('header-player');          // le player unique
  var headerAudio     = document.getElementById('radio-header-player');    // audio unique

  var mobileBar       = document.getElementById('mobile-player');          // wrapper bandeau
  var mobileBarInner  = document.getElementById('mobile-player-ui');       // inner (dans ton HTML)

  var localLinks      = document.querySelectorAll('.audio-item-link--local');

  if (!header || !headerInner || !headerPlayerBox || !headerAudio) return;

  /* =========================
     PLAYER UI: ensure structure
     ========================= */
  function ensurePlayerStructure() {
    var iconEl  = headerPlayerBox.querySelector('.header-player-icon');
    var titleEl = headerPlayerBox.querySelector('.header-player-title');
    var backBtn = headerPlayerBox.querySelector('.player-skip-btn--back');
    var fwdBtn  = headerPlayerBox.querySelector('.player-skip-btn--forward');
    var timeEl  = headerPlayerBox.querySelector('.header-player-time');

    // si on est dans l'état "PLAYER" (innerHTML simple), on reconstruit quand un src existe
    if (iconEl && titleEl && backBtn && fwdBtn && timeEl) return;

    headerPlayerBox.innerHTML =
      '<span class="header-player-icon"></span>' +
      '<span class="header-player-title"></span>' +
      '<button class="player-skip-btn player-skip-btn--back" type="button">⟲</button>' +
      '<button class="player-skip-btn player-skip-btn--forward" type="button">⟳</button>' +
      '<span class="header-player-time"></span>';
  }

  function setMobileBarVisible(visible) {
    if (!mobileBar) return;
    if (visible) {
      mobileBar.classList.add('is-visible');
      mobileBar.style.display = 'block';
      mobileBar.setAttribute('aria-hidden', 'false');
    } else {
      mobileBar.classList.remove('is-visible');
      mobileBar.style.display = 'none';
      mobileBar.setAttribute('aria-hidden', 'true');
    }
  }

  /* =========================
     MOVE PLAYER (no cloning)
     ========================= */
  function placePlayerForViewport() {
    // Desktop: le player reste dans le header (à droite)
    if (!isMobile()) {
      // si le player a été déplacé en mobile, on le remet dans le header
      if (headerPlayerBox.parentNode !== headerInner) {
        headerInner.appendChild(headerPlayerBox);
      }
      // bandeau mobile caché sur desktop
      setMobileBarVisible(false);
      return;
    }

    // Mobile: player dans le bandeau (s'il existe)
    if (mobileBarInner && headerPlayerBox.parentNode !== mobileBarInner) {
      mobileBarInner.appendChild(headerPlayerBox);
    }
  }

  /* =========================
     HEADER SHRINK (DESKTOP ONLY)
     ========================= */
  (function initHeaderShrink() {
    var maxHeight = window.innerHeight * 0.5;
    var minHeight = 80;

    function applyHeight(h) {
      header.style.height = h + 'px';
      if (h <= minHeight + 1) header.classList.add('header-compact');
      else header.classList.remove('header-compact');
    }

    function refresh() {
      maxHeight = window.innerHeight * 0.5;

      if (isMobile()) {
        // mobile: ne touche pas la hauteur, le CSS gère
        header.classList.remove('header-compact');
        header.style.height = '';
        return;
      }

      // desktop init
      applyHeight(maxHeight);
    }

    function onScroll() {
      if (isMobile()) return;
      var newHeight = clamp(maxHeight - window.scrollY, minHeight, maxHeight);
      applyHeight(newHeight);
    }

    refresh();
    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', function () {
      refresh();
      placePlayerForViewport();
      // si un audio est déjà chargé et qu'on repasse mobile -> on garde le bandeau visible
      updatePlayerLabel();
    });
  })();

  /* =========================
     FILTERS
     ========================= */
  (function initFilters() {
    var filters = document.querySelectorAll('.archive-filters .filter-pill');
    var items   = document.querySelectorAll('.archive-grid .audio-item');
    if (!filters.length || !items.length) return;

    filters.forEach(function (pill) {
      pill.addEventListener('click', function () {
        var filter = pill.getAttribute('data-filter');

        filters.forEach(function (p) { p.classList.remove('is-active'); });
        pill.classList.add('is-active');

        items.forEach(function (item) {
          var type = item.getAttribute('data-type');
          if (filter === 'all' || type === filter) item.classList.remove('is-hidden');
          else item.classList.add('is-hidden');
        });
      });
    });
  })();

  /* =========================
     PLAYER LABEL UPDATE
     ========================= */
  function updatePlayerLabel() {
    var src   = headerAudio.getAttribute('data-current-src');
    var title = headerAudio.getAttribute('data-current-title') || '';

    // 0) placer le player au bon endroit selon viewport
    placePlayerForViewport();

    // 1) Rien n’a été lancé
    if (!src) {
      headerPlayerBox.classList.remove('has-audio');
      headerPlayerBox.innerHTML = '<span class="header-player-title">PLAYER</span>';

      // mobile: bandeau caché tant que rien n’a été lancé
      if (isMobile()) setMobileBarVisible(false);
      return;
    }

    // 2) Un audio a été lancé : on garde l’UI complète
    headerPlayerBox.classList.add('has-audio');
    ensurePlayerStructure();

    var iconEl  = headerPlayerBox.querySelector('.header-player-icon');
    var titleEl = headerPlayerBox.querySelector('.header-player-title');
    var timeEl  = headerPlayerBox.querySelector('.header-player-time');

    var symbol  = headerAudio.paused ? '▶' : '⏸';
    var current = formatTime(headerAudio.currentTime);
    var total   = formatTime(headerAudio.duration || 0);

    var baseTitle = title ? ('NOW PLAYING: ' + title.toUpperCase()) : 'NOW PLAYING';

    iconEl.textContent  = symbol;
    titleEl.textContent = baseTitle;
    timeEl.textContent  = current + ' / ' + total;

    // mobile: bandeau visible dès qu’un local a été lancé (même en pause)
    if (isMobile()) setMobileBarVisible(true);
  }

  /* =========================
     LOCAL ITEMS: CLICK TO PLAY/TOGGLE
     ========================= */
  localLinks.forEach(function (link) {
    link.addEventListener('click', function (e) {
      e.preventDefault();

      var src = link.getAttribute('data-audio-src');
      if (!src) return;

      var currentSrc = headerAudio.getAttribute('data-current-src');

      // Toggle si même source
      if (currentSrc && currentSrc === src) {
        if (headerAudio.paused) headerAudio.play();
        else headerAudio.pause();
        return;
      }

      // Nouveau son
      var titleEl = link.closest('.audio-item') && link.closest('.audio-item').querySelector('.audio-title-text');
      var title   = titleEl ? titleEl.textContent.trim() : '';

      headerAudio.setAttribute('data-current-src', src);
      headerAudio.setAttribute('data-current-title', title);

      if (headerAudio.src !== src) headerAudio.src = src;

      headerAudio.play();
    });
  });

  /* =========================
     CLICK: ICON PLAY/PAUSE ONLY
     (works desktop + mobile because same DOM node)
     ========================= */
  headerPlayerBox.addEventListener('click', function (e) {
    var target = e.target;

    // ignore skip
    if (
      target.classList.contains('player-skip-btn--back') ||
      target.classList.contains('player-skip-btn--forward')
    ) return;

    // only icon
    if (!target.closest('.header-player-icon')) return;

    if (!headerAudio.getAttribute('data-current-src')) return;

    if (headerAudio.paused) headerAudio.play();
    else headerAudio.pause();
  });

  /* =========================
     SKIP BUTTONS (delegated)
     ========================= */
  document.addEventListener('click', function (e) {
    var target = e.target;

    var isBack    = target.classList.contains('player-skip-btn--back');
    var isForward = target.classList.contains('player-skip-btn--forward');
    if (!isBack && !isForward) return;

    e.stopPropagation();

    if (!headerAudio.getAttribute('data-current-src')) return;

    if (isBack) {
      headerAudio.currentTime = Math.max(0, headerAudio.currentTime - 10);
    } else {
      var dur = headerAudio.duration || 0;
      var t2  = headerAudio.currentTime + 10;
      headerAudio.currentTime = (dur && t2 > dur) ? dur : t2;
    }
  });

  /* =========================
     AUDIO EVENTS
     ========================= */
  headerAudio.addEventListener('play',           updatePlayerLabel);
  headerAudio.addEventListener('pause',          updatePlayerLabel);
  headerAudio.addEventListener('timeupdate',     updatePlayerLabel);
  headerAudio.addEventListener('loadedmetadata', updatePlayerLabel);

  /* =========================
     INIT
     ========================= */
  updatePlayerLabel();
  placePlayerForViewport();

})();
</script>
</body>
</html>

<!-- 
  <aside class="rail">
    <div class="vgrid">
      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/1110driving-in-berlin-20251011-151806/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/11.10_driving_in_berlin.jpg" alt="11.10 — Driving in Berlin" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/4_mix/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/4_mix.jpg" alt="4 MIX" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/mgo_radio-20250424-181447/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/2_radio_25.4.25.jpg" alt="MGO Radio 25.04.25" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/2703_00_bett/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/better.jpg" alt="27.03 Better!" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/mgo-radio-20250316-170655/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/1_radio.jpg" alt="MGO Radio 16.03.25" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/2801_repeat/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/28.01_repeat.jpg" alt="28.01 Repeat" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/in-response-to-rhythm-we-dance/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/3_mix.jpg" alt="In Response to Rhythm We Dance" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/3_mix/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/the_sun_matched_with_the_sea.jpg" alt="The Sun Matched with the Sea" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/fall-inc/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/fall_inc.jpg" alt="Fall Inc." /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/0809/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/08.09.jpg" alt="08.09" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/conversations-of-love/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/2_mix.jpg" alt="Conversations of Love" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/jm-la-cocina/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/jm_lacocina.jpg" alt="JM la cocina" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/light/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/light.jpg" alt="Light" /></div>
          <div class="seed"></div>
        </a>
      </div>

      <div class="tile" tabindex="0">
        <a href="https://www.mixcloud.com/M_GO/simdiabolos/" target="_blank" class="tile-link">
          <div class="media"><img src="assets/sim_diabolos.jpg" alt="SIM/DIA/BOLOS" /></div>
          <div class="seed"></div>
        </a>
      </div>

    <div class="tile" tabindex="0">
      <a
        href="https://www.mixcloud.com/M_GO/1_mix/"
        target="_blank"
        class="tile-link"
      >
        <div class="media"><img src="assets/1_mix.png" alt="1 MIX" /></div>
        <div class="seed"></div>
      </a>
    </div>
    </div>
  </aside>
--> 