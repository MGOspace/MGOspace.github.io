<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MGO-space</title>
  <link rel="stylesheet" href="assets/site.css" />
  <title>MGO-space — Multimedia Archival Online Space</title>
  <meta name="description" content="MGO space is a personal archive of sounds, writings, images and videos." />
  <link rel="icon" type="image/png" href="/assets/mgo-space_logonakedwhite.png">
</head>

<body class="index-page">

  <!-- Header -->
    <header class="site-header">
      <a href="index.html" class="header-logo">
        <img src="assets/mgo-space_logonakedblack.png" alt="MGO Space">
      </a>
    </header>

  <!-- Contenu principal -->
  <main class="page">

    <!-- LABEL DOORS -->
    <div class="doors-label">MGO space</div>

    <!-- LIGNE DES DOORS -->
    <section class="index-doors">
      <!-- Axe + traits verticaux -->
      <div class="doors-axis">
        <span class="axis-line axis-line-1"></span>
        <span class="axis-line axis-line-2"></span>
        <span class="axis-line axis-line-3"></span>
        <span class="axis-line axis-line-4"></span>
      </div>

      <a href="radio.html" class="card-link">
        <div class="card">
          <div class="card__content">Radio</div>
        </div>
      </a>
      <a href="writings.html" class="card-link">
        <div class="card">
          <div class="card__content">Writings</div>
        </div>
      </a>
      <a href="image.html" class="card-link">
        <div class="card">
          <div class="card__content">Images</div>
        </div>
      </a>
      <a href="video.html" class="card-link">
        <div class="card">
          <div class="card__content">Video</div>
        </div>
      </a>
    </section>

    <!-- SLOT CONTENU DU MOMENT -->
    <section class="feature">
      <div class="feature-bg">

        <button class="feature-nav feature-nav--prev" type="button" aria-label="Previous spotlight">
          ‹
        </button>

        <button class="feature-nav feature-nav--next" type="button" aria-label="Next spotlight">
          ›
        </button>

          <div class="feature-bg-inner">

            <div class="feature-spotlights">

              <!-- ============ SPOTLIGHT — EARTH (MOODBOARD) ============ -->
              <div class="feature-item is-active" data-feature="images">

                <!-- IMAGE PRINCIPALE (moodboard) -->
                <div class="feature-media">
                  <img 
                    src="assets/gallery/EARTH.png"
                    alt=""
                    class="feature-media-el"
                    data-id="table_earth"
                    data-tags="dakar"
                    data-lightbox="feature-gallery-earth"
                    data-caption=""
                    data-zoom="true"
                  />
                </div>

                <!-- IMAGES DE LA LIGHTBOX -->
                <div class="feature-gallery-hidden" aria-hidden="true" style="display:none;">
                  <img src="assets/gallery/earth1.jpg"  data-lightbox-item />
                  <img src="assets/gallery/earth2.jpg"  data-lightbox-item />
                  <img src="assets/gallery/earth3.jpg"  data-lightbox-item />
                  <img src="assets/gallery/earth4.gif"  data-lightbox-item />
                  <img src="assets/gallery/earth5.png"  data-lightbox-item />
                  <img src="assets/gallery/earth6.jpg"  data-lightbox-item />
                  <img src="assets/gallery/earth7.jpg"  data-lightbox-item />
                  <img src="assets/gallery/earth8.jpg"  data-lightbox-item />
                  <img src="assets/gallery/earth9.png"  data-lightbox-item />
                  <img src="assets/gallery/earth10.gif" data-lightbox-item />
                  <img src="assets/gallery/earth11.jpg" data-lightbox-item />
                  <img src="assets/gallery/earth12.jpg" data-lightbox-item />
                  <img src="assets/gallery/earth13.gif" data-lightbox-item />
                </div>

                <!-- TEXTE / META / CTA -->
                <div class="feature-bg-label">IMAGES</div>
                <div class="feature-bg-title">EARTH</div>

                <div class="feature-bg-meta">
                  <a href="tag-index.html?tag=dakar" class="tag-link">
                    <div class="tag-wrapper">
                      <span class="tag-text">TAIPEI</span>
                    </div>
                  </a>
                  <span class="meta-separator">&middot;</span>
                  <span class="feature-bg-year">JAN 2026</span>
                </div>

                <div class="feature-bg-cta">CLICK TO VIEW</div>

              </div>

              <!-- ============ SPOTLIGHT #1 (CURRENT) — DAKAR_MIX ============ -->
              <div class="feature-item" data-feature="mix" data-link="https://www.mixcloud.com/M_GO/dakar_mix/">

                <div class="feature-media">
                  <img
                    src="assets/dkr_mix2.png"
                    alt=""
                    class="feature-media-el"
                  />
                </div>

                <div class="feature-bg-label">RADIO</div>
                <div class="feature-bg-title">5_MIX</div>

                <div class="feature-bg-meta">
                  <a href="tag-index.html?tag=dakar" class="tag-link">
                    <div class="tag-wrapper">
                      <span class="tag-text">DAKAR</span>
                    </div>
                  </a>
                  <span class="meta-separator">&middot;</span>
                  <span class="feature-bg-year">DEC 2025</span>
                </div>

                <div class="feature-bg-cta">CLICK TO ENTER</div>
              </div>


              <!-- ============ SPOTLIGHT #2 (PREVIOUS) — Water IMAGES ============ -->
              <div class="feature-item" data-feature="images">

                <!-- IMAGE (ou média) dans la capsule -->
                <div class="feature-media">
                  <img 
                    src="assets/MGO_water_dakar.png"
                    alt=""
                    class="feature-media-el"
                    data-id="table_water_dakar"
                    data-tags="dakar"
                    data-lightbox="feature-gallery-water"
                    data-caption=""
                    data-zoom="true"
                  />
                </div>

                <!-- IMAGES DE LA LIGHTBOX -->
                <div class="feature-gallery-hidden" aria-hidden="true" style="display:none;">
                  <img src="assets/water_dakar/water1.jpg"  data-lightbox-item data-caption="I left. <br>What did I leave?<br>I'm not coming back for a while" />
                  <img src="assets/water_dakar/water2.png"  data-lightbox-item />
                  <img src="assets/water_dakar/water3.jpg"  data-lightbox-item />
                  <img src="assets/water_dakar/water4.jpg"  data-lightbox-item />
                  <img src="assets/water_dakar/water5.jpg"  data-lightbox-item />
                  <img src="assets/water_dakar/water6.jpg"  data-lightbox-item />
                  <img src="assets/water_dakar/water7.jpg"  data-lightbox-item />
                  <img src="assets/water_dakar/water8.gif"  data-lightbox-item />
                  <img src="assets/water_dakar/water9.jpg"  data-lightbox-item />
                  <img src="assets/water_dakar/water10.png" data-lightbox-item />
                  <img src="assets/water_dakar/water11.gif" data-lightbox-item />
                  <img src="assets/water_dakar/water12.gif" data-lightbox-item />
                </div>

                <!-- TEXTE / META / CTA -->
                <div class="feature-bg-label">IMAGES</div>
                <div class="feature-bg-title">Water</div>
                <div class="feature-bg-meta">
                  <a href="tag-index.html?tag=dakar" class="tag-link">
                    <div class="tag-wrapper">
                      <span class="tag-text">DAKAR</span>
                    </div>
                  </a>
                  <span class="meta-separator">&middot;</span>
                  <span class="feature-bg-year">NOV 2025</span>
                </div>
                <div class="feature-bg-cta">CLICK TO VIEW</div>

              </div>

            </div>
          </div>
      </div>
    </section>

    <!-- LIGHTBOX GLOBALE -->
    <div class="lightbox" data-lightbox-root aria-hidden="true">
      <button class="lightbox-nav lightbox-prev" type="button" aria-label="Previous">‹</button>

      <figure class="lightbox-figure">
        <img src="" alt="" class="lightbox-image" />
        <figcaption class="lightbox-caption">
          <div class="lightbox-tags"></div>
        </figcaption>
      </figure>

      <button class="lightbox-nav lightbox-next" type="button" aria-label="Next">›</button>

      <div class="lightbox-hit lightbox-hit--left"></div>
      <div class="lightbox-hit lightbox-hit--right"></div>
    </div>

  </main>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-coords" id="footer-coords">NOW -</div>
      <nav class="btn-nav" aria-label="Menu questions footer">
        <ul class="btn-list">
          <li class="radio-wrapper">
            <a href="about.html" class="btn" aria-label="ABOUT">
              <span aria-hidden>_</span>ABOUT
              <span class="btn__glitch" aria-hidden>_ABOUT</span>
              <span class="number">?</span>
            </a>
          </li>
        </ul>
      </nav>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

/* =========================
   LIGHTBOX FEATURE (scopé par spotlight)
   ========================= */
const lightbox = document.querySelector('[data-lightbox-root]');

if (lightbox) {
  const img       = lightbox.querySelector('.lightbox-image');
  const captionEl = lightbox.querySelector('.lightbox-caption');
  const prevBtn   = lightbox.querySelector('.lightbox-prev');
  const nextBtn   = lightbox.querySelector('.lightbox-next');
  const hitLeft   = lightbox.querySelector('.lightbox-hit--left');
  const hitRight  = lightbox.querySelector('.lightbox-hit--right');

  let items = [];
  let currentIndex = 0;

  // Zoom / pan seulement pour l’index 0
  let scale       = 1;
  const zoomLevel = 2;
  let panX        = 0;
  let panY        = 0;

  let isDragging   = false;
  let didDrag      = false;
  let startMouseX  = 0;
  let startMouseY  = 0;
  let startPanX    = 0;
  let startPanY    = 0;
  const DRAG_THRESHOLD = 4;

  img.addEventListener('dragstart', (e) => e.preventDefault());

  function applyTransform() {
    img.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
    if (scale === 1) img.classList.add('is-not-zoomed');
    else img.classList.remove('is-not-zoomed');
  }

  function resetTransform() {
    scale = 1; panX = 0; panY = 0;
    applyTransform();
  }

  function showImage(index) {
    if (!items.length) return;

    if (index < 0) index = items.length - 1;
    if (index >= items.length) index = 0;

    currentIndex = index;

    const item = items[currentIndex];
    img.setAttribute('src', item.src);
    captionEl.innerHTML = item.caption || '';

    resetTransform();

    if (currentIndex !== 0) img.classList.add('is-not-zoomed');
  }

  function openLightbox(startIndex = 0) {
    showImage(startIndex);
    lightbox.classList.add('is-open');
    document.body.classList.add('has-lightbox-open');
  }

  function closeLightbox() {
    lightbox.classList.remove('is-open');
    document.body.classList.remove('has-lightbox-open');
  }

  // IMPORTANT : multi triggers + scope par feature-item
  document.addEventListener('click', (e) => {
    const trigger = e.target.closest('[data-lightbox]');
    if (!trigger) return;

    const group = trigger.getAttribute('data-lightbox'); // ex: feature-gallery-earth
    if (!group) return;

    e.preventDefault();

    const scope = trigger.closest('.feature-item') || document;

    // 1) moodboard (trigger)
    items = [{
      src: trigger.getAttribute('src'),
      caption: trigger.dataset.caption || ''
    }];

    // 2) autres images : uniquement celles du scope, et uniquement si le trigger appartient au même groupe
    const sameGroupTriggers = scope.querySelectorAll(`[data-lightbox="${group}"]`);
    if (sameGroupTriggers.length) {
      scope.querySelectorAll('.feature-gallery-hidden [data-lightbox-item]').forEach(el => {
        items.push({
          src: el.getAttribute('src'),
          caption: el.dataset.caption || ''
        });
      });
    }

    openLightbox(0);
  });

  // fermer si clic sur le fond uniquement
  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  if (prevBtn) prevBtn.addEventListener('click', (e) => { e.stopPropagation(); showImage(currentIndex - 1); });
  if (nextBtn) nextBtn.addEventListener('click', (e) => { e.stopPropagation(); showImage(currentIndex + 1); });
  if (hitLeft) hitLeft.addEventListener('click', (e) => { e.stopPropagation(); showImage(currentIndex - 1); });
  if (hitRight) hitRight.addEventListener('click', (e) => { e.stopPropagation(); showImage(currentIndex + 1); });

  document.addEventListener('keydown', (e) => {
    if (!lightbox.classList.contains('is-open')) return;

    if (e.key === 'Escape') closeLightbox();
    else if (e.key === 'ArrowRight') showImage(currentIndex + 1);
    else if (e.key === 'ArrowLeft') showImage(currentIndex - 1);
  });

  // clic image => zoom (index 0 seulement)
  img.addEventListener('click', (e) => {
    e.stopPropagation();

    if (didDrag) { didDrag = false; return; }
    if (currentIndex !== 0) return;

    if (scale === 1) scale = zoomLevel;
    else { resetTransform(); return; }

    applyTransform();
  });

  // drag seulement si zoomé et index 0
  img.addEventListener('mousedown', (e) => {
    if (currentIndex !== 0) return;
    if (scale === 1) return;

    isDragging = true;
    didDrag = false;
    lightbox.classList.add('is-dragging');

    startMouseX = e.clientX;
    startMouseY = e.clientY;
    startPanX = panX;
    startPanY = panY;
  });

  window.addEventListener('mousemove', (e) => {
    if (!isDragging) return;

    const dx = e.clientX - startMouseX;
    const dy = e.clientY - startMouseY;

    if (Math.abs(dx) > DRAG_THRESHOLD || Math.abs(dy) > DRAG_THRESHOLD) didDrag = true;

    panX = startPanX + dx;
    panY = startPanY + dy;

    applyTransform();
  });

  window.addEventListener('mouseup', () => {
    if (!isDragging) return;
    isDragging = false;
    lightbox.classList.remove('is-dragging');
  });

  // pan au trackpad seulement si zoomé et index 0
  lightbox.addEventListener('wheel', (e) => {
    if (!lightbox.classList.contains('is-open')) return;
    if (currentIndex !== 0) return;
    if (scale === 1) return;

    e.preventDefault();
    panX -= e.deltaX;
    panY -= e.deltaY;
    applyTransform();
  }, { passive: false });
}


  /* =========================
     FEATURE SPOTLIGHT NAV + CLICK (MIXCLOUD)
     ========================= */
  const featureBgInner = document.querySelector('.feature-bg-inner');
  const featureItems   = Array.from(document.querySelectorAll('.feature-item'));
  const prevSpotBtn    = document.querySelector('.feature-nav--prev');
  const nextSpotBtn    = document.querySelector('.feature-nav--next');

  function getActiveFeatureIndex(){
    return featureItems.findIndex(el => el.classList.contains('is-active'));
  }

  function setActiveFeature(index){
    if (!featureItems.length) return;

    if (index < 0) index = featureItems.length - 1;
    if (index >= featureItems.length) index = 0;

    featureItems.forEach(el => el.classList.remove('is-active'));
    featureItems[index].classList.add('is-active');
  }

  if (prevSpotBtn) {
    prevSpotBtn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      setActiveFeature(getActiveFeatureIndex() - 1);
    });
  }

  if (nextSpotBtn) {
    nextSpotBtn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      setActiveFeature(getActiveFeatureIndex() + 1);
    });
  }

  if (featureBgInner) {
    featureBgInner.addEventListener('click', (e) => {
      // ne pas hijack un clic sur un lien (tag) ou sur les flèches
      if (e.target.closest('a, button')) return;

      const active = document.querySelector('.feature-item.is-active');
      if (!active) return;

      const type = active.dataset.feature;

      if (type === 'mix') {
        const url = active.dataset.link;
        if (url) window.open(url, '_blank', 'noopener');
        return;
      }

      if (type === 'images') {
        const t = active.querySelector('[data-lightbox]');
        if (t) t.click();
        return;
      }
    });
  }


  /* =========================
     FOOTER COORDS (DATE)
     ========================= */
  const coordsEl = document.getElementById("footer-coords");
  if (coordsEl) {
    const today = new Date();
    const options = { month: "short", day: "numeric", year: "numeric" };
    const formatted = today.toLocaleDateString("en-US", options);
    coordsEl.textContent = `NOW — Taipei — ${formatted}`;
  }

});
</script>

</body>
</html>